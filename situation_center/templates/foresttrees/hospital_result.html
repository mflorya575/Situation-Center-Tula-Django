{% extends 'partials/base.html' %}
{% load static %}

{% block content %}

<h2>Результаты для {{ hospital.title }}</h2>

<p>Коэффициент детерминации на обучающей выборке: {{ train_r2_score }}</p>
<p>Коэффициент детерминации на тестовой выборке: {{ test_r2_score }}</p>
<p>Среднеквадратичная ошибка на обучающей выборке: {{ train_mse }}</p>
<p>Среднеквадратичная ошибка на тестовой выборке: {{ test_mse }}</p>

<h3>Значимость факторных переменных:</h3>
<div>
    {{ feature_importances_plot|safe }}
</div>

<h3>Деревья:</h3>
<ul>
    {% for tree in trees %}
        <li>
            <button onclick="toggleTree({{ forloop.counter }})">Показать дерево {{ forloop.counter }}</button>
            <pre id="tree{{ forloop.counter }}" style="display:none;">{{ tree|safe }}</pre>
        </li>
    {% endfor %}
</ul>

<script>
    function toggleTree(id) {
        var x = document.getElementById("tree" + id);
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
</script>

{% endblock content %}